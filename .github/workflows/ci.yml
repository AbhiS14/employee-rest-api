name: CI

on:
push:
branches:
- main
- develop
pull_request:
branches:
- main

jobs:

test:
runs-on: ubuntu-latest

```
steps:
  - name: Checkout
    uses: actions/checkout@v4

  - name: Setup Python
    uses: actions/setup-python@v5
    with:
      python-version: "3.12"

  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install -r requirements.txt

  - name: Run tests
    run: |
      pytest
```

docker:
runs-on: ubuntu-latest
needs: test

```
steps:
  - name: Checkout
    uses: actions/checkout@v4

  - name: Build Docker
    run: |
      docker build -t employee-api .

  - name: Run Docker
    run: |
      docker run -d -p 5000:5000 --name test-api employee-api

  - name: Wait
    run: sleep 8

  - name: Test health
    run: |
      curl -f http://localhost:5000/health

  - name: Stop Docker
    run: docker stop test-api
```
